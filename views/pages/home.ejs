<%- include("../partials/header") %>

    
    <section class="container p-0">
  <div class="position-relative text-white">
   
    <img src="<%= heroBlog ? heroBlog.image : '/images/hero.png' %>" 
         class="img-fluid w-100 rounded-4" alt="Hero"
         style="max-height: 85vh; object-fit: cover;">

    
    <div class="position-absolute top-0 start-0 w-100 h-100 rounded-4" style="background: rgba(0,0,0,0.4);"></div>

  
    <div class=" banner ps-5">
      <% if (heroBlog) { %>
        <h1 class="display-4 fw-bold"><%= heroBlog.title %></h1>
        <p class="lead"><%= heroBlog.content.substring(0, 120) %>...</p>
        <a href="/blogs/details/<%= heroBlog._id %>" 
           class="btn btn-light btn-lg rounded-pill">Read Blog</a>
      <% } else { %>
        <h1 class="display-4 fw-bold">Book the best <br> trip of your life</h1>
        <p class="lead">Award-winning resorts in Swiss alps.</p>
        <a href="/blogs" class="btn btn-light btn-lg rounded-pill">Explore & Book</a>
      <% } %>
    </div>
  </div>
</section>


  
<section class="container my-5">
  <div class="row align-items-center g-5">

   
    <div class="col-lg-6">
      <div class="position-relative rounded-4 shadow overflow-hidden">
        <img src="<%= firstSection ? firstSection.image : '/images/default-blog.png' %>" 
             class="d-block w-100 rounded-4" alt="Blog Image"
             style="height: 350px; object-fit: cover;">

      
        <div class="position-absolute top-0 start-0 m-3">
          <span class="badge bg-light text-dark fs-6 fw-semibold px-3 py-2 rounded-pill shadow-sm">
            <%= firstSection ? new Date(firstSection.createdAt).toLocaleDateString() : '12 Sep 2025' %>
          </span>
        </div>
      </div>
    </div>

    
    <div class="col-lg-6">
      <div class="p-4 bg-white rounded-4 shadow">

     
        <div class="d-flex justify-content-between align-items-center mb-3">
          <small class="text-muted">
            <i class="bi bi-person-circle me-1"></i> 
            <%= firstSection && firstSection.author ? firstSection.author.username : 'Unknown Author' %>
          </small>
          <div>
            <span class="me-3"><i class="bi bi-hand-thumbs-up me-1 text-success"></i><%= firstSection ? firstSection.likes || 0 : 0 %></span>
            <span><i class="bi bi-hand-thumbs-down me-1 text-danger"></i><%= firstSection ? firstSection.dislikes || 0 : 0 %></span>
          </div>
        </div>

      
        <h3 class="fw-bold text-dark mb-3">
          <%= firstSection ? firstSection.title : 'Sample Blog Title' %>
        </h3>

     
        <p class="text-muted mb-4">
          <%= firstSection ? firstSection.content.substring(0, 200) : 'This is a short preview of the blog content. It will dynamically display the first 200 characters of your blog post.' %>...
        </p>

       
        <ul class="list-unstyled mb-4">
          <li class="mb-2"><i class="bi bi-chat-dots me-2"></i> <%= firstSection ? (firstSection.comments ? firstSection.comments.length : 0) : 0 %> Comments</li>
         <li class="mb-2">

        </ul>

      
        <div class="d-flex">
          <a href="<%= firstSection ? '/blogs/details/' + firstSection._id : '#' %>" 
             class="btn btn-dark rounded-pill px-4 py-2 me-3">
            Read more
          </a>
          <a href="#" class="btn btn-outline-dark rounded-pill px-4 py-2">
            Share
          </a>
        </div>
      </div>
    </div>
  </div>
</section>




<section class="container my-5">
  <div class="row align-items-center g-5">

   
    <div class="col-lg-6">
      <div class="p-4 bg-white rounded-4 shadow">

     
        <div class="d-flex justify-content-between align-items-center mb-3">
          <small class="text-muted">
            <i class="bi bi-person-circle me-1"></i> 
            <%= secondSection && secondSection.author ? secondSection.author.username : 'Unknown Author' %>
          </small>
          <div>
            <span class="me-3">
              <i class="bi bi-hand-thumbs-up me-1 text-success"></i>
               <%= secondSection ? secondSection.likes || 0 : 0 %>
            </span>
            <span>
              <i class="bi bi-hand-thumbs-down me-1 text-danger"></i>
               <%= secondSection ? secondSection.dislikes || 0 : 0 %>
            </span>
          </div>
        </div>

      
        <h3 class="fw-bold text-dark mb-3">
          <%= secondSection ? secondSection.title : 'Mountain Chalet' %>
        </h3>

       
        <p class="text-muted mb-4">
          <%= secondSection ? secondSection.content.substring(0, 200) : 'Mountain Chalet offers the ideal retreat...' %>...
        </p>

       
        <ul class="list-unstyled mb-4">
          <li class="mb-2"><i class="bi bi-chat-dots me-2"></i> 
             <%= secondSection ? (secondSection.comments ? secondSection.comments.length : 0) : 0 %> Comments
          </li>
        </ul>

       
        <div class="d-flex">
          <a href="<%= secondSection ? '/blogs/details/' + secondSection._id : '#' %>" 
             class="btn btn-dark rounded-pill px-4 py-2 me-3">
            Read more
          </a>
          <a href="#" class="btn btn-outline-dark rounded-pill px-4 py-2">
            Share
          </a>
        </div>
      </div>
    </div>

    

    <div class="col-lg-6">
      <div class="position-relative rounded-4 shadow overflow-hidden">
        <img src="<%= secondSection ? secondSection.image : '/images/2row.png' %>" 
             class="d-block w-100 rounded-4" alt="Blog Image"
             style="height: 350px; object-fit: cover;">

       
        <div class="position-absolute top-0 start-0 m-3">
          <span class="badge bg-light text-dark fs-6 fw-semibold px-3 py-2 rounded-pill shadow-sm">
            <%= secondSection ? new Date(secondSection.createdAt).toLocaleDateString() : '12 Sep 2025' %>
          </span>
        </div>
      </div>
    </div>

  </div>
</section>


   
<section class="container my-5">
  <h5>Our blog</h5>
  <h2 class="fw-bold mb-4">Latest stories from <br> the Swiss alps</h2>
  
  <div class="row g-4">
    <% if (blogs.length > 0) { %>
      <% blogs.forEach(blog => { %>
        <div class="col-md-4">
          <div class="card border-0 h-100 shadow-sm rounded-4">
            
           
            <div class="overflow-hidden rounded-top-4" style="height: 220px;">
              <img src="<%= blog.image || '/images/blog1.png' %>" 
                   class="w-100 h-100 object-fit-cover" 
                   alt="<%= blog.title %>">
            </div>

        
            <div class="card-body d-flex flex-column px-3" style="min-height: 200px;">
              <h5 class="card-title"><%= blog.title %></h5>
              <small class="text-muted mb-2 d-block">
                <%= blog.createdAt.toDateString() %> 
                by <%= blog.author ? blog.author.username : "Anonymous" %>
              </small>
              <p class="text-muted flex-grow-1"><%= blog.content.substring(0, 100) %>...</p>
                <div class="d-flex justify-content-between align-items-center mb-2">
                <span><i class="bi bi-hand-thumbs-up text-success me-1"></i> <%= blog.likes || 0 %></span>
                <span><i class="bi bi-hand-thumbs-down text-danger me-1"></i> <%= blog.dislikes || 0 %></span>
                <span><i class="bi bi-chat-dots text-primary me-1"></i> <%= blog.comments ? blog.comments.length : 0 %></span>
              </div>
              <a href="/blogs/details/<%= blog._id %>" class="rounded-pill px-3 py-1 mt-auto">Read more</a>
            </div>

          </div>
        </div>
      <% }) %>
    <% } else { %>
      <p class="text-muted">No blogs available yet. Be the first to add one!</p>
    <% } %>
  </div>
</section>

<style>
.object-fit-cover {
  object-fit: cover;
}
.card-body p {
  overflow: hidden;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {

  document.querySelectorAll(".like-btn").forEach(btn => {
    btn.addEventListener("click", async () => {
      const blogId = btn.dataset.id;
      const res = await fetch(`/blogs/${blogId}/like`, { method: "POST" });
      const data = await res.json();
      btn.querySelector(".like-count").textContent = data.likes;
    });
  });

 
  document.querySelectorAll(".dislike-btn").forEach(btn => {
    btn.addEventListener("click", async () => {
      const blogId = btn.dataset.id;
      const res = await fetch(`/blogs/${blogId}/dislike`, { method: "POST" });
      const data = await res.json();
      btn.querySelector(".dislike-count").textContent = data.dislikes;
    });
  });

  
  document.querySelectorAll(".comment-btn").forEach(btn => {
    btn.addEventListener("click", async () => {
      const blogId = btn.dataset.id;
      const res = await fetch(`/blogs/${blogId}/comment`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: "New comment" })
      });
      const data = await res.json();
      btn.querySelector(".comment-count").textContent = data.comments;
    });
  });
});
</script>



    <%- include("../partials/footer") %>